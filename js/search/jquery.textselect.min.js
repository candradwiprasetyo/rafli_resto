/**
 * textSelect jQuery Plug-in
 * 
 * Copyright (c) 2011, Simon Chong
 * 
 * Licensed under The MIT License which can be obtained from <http://www.opensource.org>
 * 
 * textSelect is a jQuery Plug-in enables easy manipulation of text using the browsers native text selection.
 * 
 * It was created to bridge the gap between the DOM Range and Selection objects that are missing in Internet Explorer up until version 9.
 */
(function(g){var f={clear:function(){window.getSelection?window.getSelection().removeAllRanges():document.selection.createRange&&document.selection.empty()},getTextNode:function(a){a=g(a).first().get(0);if(window.getSelection&&a.childNodes)for(var a=a.childNodes,b=0;b<a.length;b++){var c=a[b];if(c.nodeType===3)return c}else if(document.selection)return a;return!1},getElement:function(a){return g(a).first().get(0)}},h={getRange:function(){var a={start:0,startElement:null,end:0,endElement:null};if(window.getSelection){var b= window.getSelection().getRangeAt(0);a.start=b.startOffset;a.startElement=b.startContainer;a.end=b.endOffset;a.endElement=b.endContainer}else if(document.selection){var c=document.selection.createRange(),d=c.duplicate(),b=c.duplicate();d.collapse(!0);b.collapse(!1);a.startElement=d.parentElement();a.endElement=b.parentElement();var e=c.duplicate();e.moveToElementText(d.parentElement());e.setEndPoint("EndToStart",d);a.start=e.text.length;c=c.duplicate();c.moveToElementText(b.parentElement());c.setEndPoint("EndToStart", b);a.end=c.text.length}return a},setRange:function(a){f.clear();if(typeof a==="object"){var b=!1,c=!1;if(window.getSelection){var d=window.getSelection(),e=document.createRange();a.startElement!==void 0&&(b=f.getTextNode(a.startElement));a.endElement!==void 0&&(c=f.getTextNode(a.endElement));a.start!==void 0&&b&&e.setStart(b,a.start);a.end!==void 0&&c&&e.setEnd(c,a.end);d.addRange(e)}else document.selection&&(e=document.body.createTextRange(),a.startElement!==void 0&&(b=f.getElement(a.startElement)), a.endElement!==void 0&&(c=f.getElement(a.endElement)),a.start&&b&&(d=e.duplicate(),d.moveToElementText(b),d.move("character",a.start),e.setEndPoint("StartToStart",d)),a.end&&c&&(b=e.duplicate(),b.moveToElementText(c),b.move("character",a.end),e.setEndPoint("EndToEnd",b)),e.select());return this}},select:function(){f.clear();for(var a=0;a<this.length;a++){var b=this[a];if(window.getSelection){var c=window.getSelection(),d=b.firstChild;d&&d.data.length>1&&(d=document.createRange(),d.selectNode(b),c.addRange(d))}else d= document.body.createTextRange(),d.moveToElementText(b),d.select()}return this},clear:function(){f.clear();return this},remove:function(){if(window.getSelection){var a=window.getSelection();try{a.deleteFromDocument()}catch(b){}a.isCollapsed||a.getRangeAt(0).deleteContents();a.anchorNode&&a.collapse(a.anchorNode,a.anchorOffset)}else document.selection&&document.selection.clear();return this},toString:function(){if(window.getSelection)return window.getSelection().toString();else if(document.selection)return document.selection.createRange().text}}; g.textSelect=g.fn.textSelect=function(a){return h[a]?h[a].apply(this,Array.prototype.slice.call(arguments,1)):h.toString.apply(this,Array.prototype.slice.call(arguments,1))}})(jQuery);
